\begindata{text,537600160}
\textdsversion{12}
\template{default}
\section{Implementation Notes for Observable Reference Counting

(The traced class)

}Class has been modified to have the Destroy classprocedure call the Destroyp 
class procedures of the class (if it exists) and any superclasses which have a 
procedure by that name.  If any of these calls return FALSE, the object is not 
destroyed.  It is important to note that all of the Destroyp class procedures 
will be called, there is no short circuit evaluation.  However, the exact 
order in which they are called should not be relied upon.


Instead of adding the reference counting code to observable a new class called 
traced has been introduced.  Any object of a class derived from traced cannot 
be destroyed until there are no references to it.  Any newly created object of 
a subclass of traced will have a reference count of 1.


The traced class has three methods:


\example{long traced_Reference(struct traced *self)\indent{

Increments the object's reference count.  Returns the previous value of the 
reference count.}

long traced_UnReference(struct traced *self)

\indent{Decrements the object's reference count.  This should be used only in 
extraordinary situations, normally the reference count is decremented by 
calling the appropriate Destroy procedure.  Returns the previous value of the 
reference count.}

long traced_ReferenceCount(struct traced *self)

\indent{Returns the value of the reference count.}}

\begindata{bp,537699904}
\enddata{bp,537699904}
\view{bpv,537699904,0,0,0}
Copyright 1992 Carnegie Mellon University All rights reserved.
\enddata{text,537600160}
