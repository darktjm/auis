/* 
	Copyright IBM Corporation 1988,1991 - All Rights Reserved
	Copyright Carnegie Mellon, 1996
	For full copyright information see: `<andrew tree>/config/COPYRITE'

	$Disclaimer: 
* Permission to use, copy, modify, and distribute this software and its 
* documentation for any purpose and without fee is hereby granted, provided 
* that the above copyright notice appear in all copies and that both that 
* copyright notice and this permission notice appear in supporting 
* documentation, and that the name of IBM not be used in advertising or 
* publicity pertaining to distribution of the software without specific, 
* written prior permission. 
*                         
* THE COPYRIGHT HOLDERS DISCLAIM ALL WARRANTIES WITH REGARD 
* TO THIS SOFTWARE, INCLUDING ALL IMPLIED WARRANTIES OF 
* MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL ANY COPYRIGHT 
* HOLDER BE LIABLE FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL 
* DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, 
* DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE 
* OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION 
* WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
* 
*  $
*/

#ifdef SNAP_ENV

/*  *WARNING*
   This Imakefile parses the installed amsvers.h file to determine the name for the messageserver executable program.  BEWARE!
 *WARNING* */

LOCALINCLUDES	=	-I${BASEDIR}/include/ams

PRODUCT	=	messageserver
OBJS		=	errmsgs.o ms.o

LIBS_PART_A= \
	${BASEDIR}/lib/libmssrv.a \
	${BASEDIR}/lib/libmsshr.a \
	${BASEDIR}/lib/libeli.a \
	${BASEDIR}/lib/librxp.a

LIBS_PART_B= \
	${BASEDIR}/lib/libmail.a \
	$(BASEDIR)/lib/libcparser.a \
	${BASEDIR}/lib/liberrors.a \
	${UTILLIB} ${PRSLIB} \
	${BASEDIR}/lib/libgasp.a

NSNAP_LIBS= \
	${LIBS_PART_A} \
	${BASEDIR}/lib/libsnap.a \
	${LIBS_PART_B}

#ifdef USE_MMDF_ENV
MMFDLB = ${MMDFLIBS}
#endif

ProgramTarget(messageserver, ${OBJS}, ${NSNAP_LIBS} , ${SUPLIBS} ${NETLIBS} ${MMFDLB} ${BSDLIB})

DEST = $(DESTDIR)/etc/snap/services/`awk -f imkfile.awk  ${BASEDIR}/include/ams/amsvers.h`

InstallFileToFile(messageserver, $(INSTPROGRWFLAGS), $(DEST))

#endif /* SNAP_ENV */
